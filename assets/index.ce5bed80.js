import _t from"https://unpkg.com/@mapbox/mapbox-gl-draw@1.3.0/src/lib/theme.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const he={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||!e._ctx.store.getInitialConfigValue("doubleClickZoom")||e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}},k={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},Xe={POLYGON:"polygon",LINE:"line_string",POINT:"point"},R={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},x={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},Le={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},Te={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},ee={ACTIVE:"true",INACTIVE:"false"};function Fe(e){const t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===Te.VERTEX}function Oe(e){return e.keyCode===27}function Ge(e){return e.keyCode===13}const le="select_feature",me=`${le}_highlight`,Nt={highlightColor:"#222"},oe={};oe.onSetup=function(e){const{selectHighlightColor:t,onSelect:r,onCancel:n}=e,o={};o.hoveredFeatureID=null,o.selectedFeatureID=null,o.onSelect=r,o.onCancel=n,o.api=this._ctx.api;const{selectHighlightColor:i=Nt.highlightColor}=this._ctx.options;return o.options={selectHighlightColor:t||i},o};oe.onMouseMove=function(e,t){const{api:r}=e,{featureTarget:n}=t;if(n){this.updateUIClasses({mouse:k.POINTER});const o=n.properties.id;e.hoveredFeatureID!==null&&e.hoveredFeatureID!==o&&r.setFeatureProperty(e.hoveredFeatureID,me,void 0),e.hoveredFeatureID=o,r.setFeatureProperty(e.hoveredFeatureID,me,e.options.selectHighlightColor)}else e.hoveredFeatureID&&r.setFeatureProperty(e.hoveredFeatureID,me,void 0),e.hoveredFeatureID=null};oe.onClick=function(e,t){e.selectedFeatureID=e.hoveredFeatureID,this.onStop(e,t)};oe.toDisplayFeatures=function(e,t,r){r(t)};oe.onKeyUp=function(e,t){Oe(t)&&this.changeMode(x.SIMPLE_SELECT)};oe.onStop=function(e){this.updateUIClasses({mouse:k.NONE}),he.enable(this),this.activateUIButton(),e.selectedFeatureID?(typeof e.onSelect=="function"?e.onSelect(e.selectedFeatureID):this.map.fire("draw.select_mode.select",{featureID:e.selectedFeatureID}),e.selectedFeatureID=null,this.changeMode(x.SIMPLE_SELECT,{},{silent:!0})):typeof e.onCancel=="function"&&e.onCancel(),e.hoveredFeatureID&&(this._ctx.api.setFeatureProperty(e.hoveredFeatureID,me,void 0),e.hoveredFeatureID=null)};const Q=`user_${me}`,dt=e=>e.concat([{id:`${le}-fill`,type:"fill",filter:["all",["==","$type","Polygon"],["has",Q]],paint:{"fill-color":["get",Q],"fill-outline-color":["get",Q],"fill-opacity":.2}},{id:`${le}-stroke`,type:"line",filter:["all",["==","$type","Polygon"],["has",Q]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["get",Q],"line-dasharray":[.2,2],"line-width":2}},{id:`${le}-line`,type:"line",filter:["all",["==","$type","LineString"],["has",Q]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["get",Q],"line-dasharray":[.2,2],"line-width":2}},{id:`${le}-point`,type:"circle",filter:["all",["==","$type","Point"],["has",Q]],paint:{"circle-color":["get",Q],"circle-radius":3}}]);function pt(e){return{...e,[le]:oe}}function Dt(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return vt(e);case"FeatureCollection":return kt(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return ze(e);default:throw new Error("unknown GeoJSON type")}}function vt(e){var t={type:"Feature"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}}),t.properties=mt(e.properties),t.geometry=ze(e.geometry),t}function mt(e){var t={};return e&&Object.keys(e).forEach(function(r){var n=e[r];typeof n=="object"?n===null?t[r]=null:Array.isArray(n)?t[r]=n.map(function(o){return o}):t[r]=mt(n):t[r]=n}),t}function kt(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}}),t.features=e.features.map(function(r){return vt(r)}),t}function ze(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(function(r){return ze(r)}),t):(t.coordinates=gt(e.coordinates),t)}function gt(e){var t=e;return typeof t[0]!="object"?t.slice():t.map(function(r){return gt(r)})}var _=63710088e-1,qe={centimeters:_*100,centimetres:_*100,degrees:_/111325,feet:_*3.28084,inches:_*39.37,kilometers:_/1e3,kilometres:_/1e3,meters:_,metres:_,miles:_/1609.344,millimeters:_*1e3,millimetres:_*1e3,nauticalmiles:_/1852,radians:1,yards:_*1.0936},Rt={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/_,yards:1.0936133},De={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Y(e,t,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function Yt(e,t,r){switch(e){case"Point":return J(t).geometry;case"LineString":return U(t).geometry;case"Polygon":return Je(t).geometry;case"MultiPoint":return yt(t).geometry;case"MultiLineString":return Ze(t).geometry;case"MultiPolygon":return wt(t).geometry;default:throw new Error(e+" is invalid")}}function J(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ie(e[0])||!Ie(e[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:e};return Y(n,t,r)}function Bt(e,t,r){return r===void 0&&(r={}),K(e.map(function(n){return J(n,t)}),r)}function Je(e,t,r){r===void 0&&(r={});for(var n=0,o=e;n<o.length;n++){var i=o[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return Y(l,t,r)}function Vt(e,t,r){return r===void 0&&(r={}),K(e.map(function(n){return Je(n,t)}),r)}function U(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return Y(n,t,r)}function Ut(e,t,r){return r===void 0&&(r={}),K(e.map(function(n){return U(n,t)}),r)}function K(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function Ze(e,t,r){r===void 0&&(r={});var n={type:"MultiLineString",coordinates:e};return Y(n,t,r)}function yt(e,t,r){r===void 0&&(r={});var n={type:"MultiPoint",coordinates:e};return Y(n,t,r)}function wt(e,t,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:e};return Y(n,t,r)}function Xt(e,t,r){r===void 0&&(r={});var n={type:"GeometryCollection",geometries:e};return Y(n,t,r)}function Gt(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function Pt(e,t){t===void 0&&(t="kilometers");var r=qe[t];if(!r)throw new Error(t+" units is invalid");return e*r}function We(e,t){t===void 0&&(t="kilometers");var r=qe[t];if(!r)throw new Error(t+" units is invalid");return e/r}function zt(e,t){return Et(We(e,t))}function qt(e){var t=e%360;return t<0&&(t+=360),t}function Et(e){var t=e%(2*Math.PI);return t*180/Math.PI}function Jt(e){var t=e%360;return t*Math.PI/180}function Zt(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return Pt(We(e,t),r)}function Wt(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=De[t];if(!n)throw new Error("invalid original units");var o=De[r];if(!o)throw new Error("invalid final units");return e/n*o}function Ie(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function xe(e){return!!e&&e.constructor===Object}function Qt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!Ie(t))throw new Error("bbox must only contain numbers")})}function Ht(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const Kt=Object.freeze(Object.defineProperty({__proto__:null,earthRadius:_,factors:qe,unitsFactors:Rt,areaFactors:De,feature:Y,geometry:Yt,point:J,points:Bt,polygon:Je,polygons:Vt,lineString:U,lineStrings:Ut,featureCollection:K,multiLineString:Ze,multiPoint:yt,multiPolygon:wt,geometryCollection:Xt,round:Gt,radiansToLength:Pt,lengthToRadians:We,lengthToDegrees:zt,bearingToAzimuth:qt,radiansToDegrees:Et,degreesToRadians:Jt,convertLength:Zt,convertArea:Wt,isNumber:Ie,isObject:xe,validateBBox:Qt,validateId:Ht},Symbol.toStringTag,{value:"Module"}));function $t(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Z(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ae(e){return e.type==="Feature"?e.geometry:e}function ke(e){for(var t=Z(e),r=0,n=1,o,i;n<t.length;)o=i||t[0],i=t[n],r+=(i[0]-o[0])*(i[1]+o[1]),n++;return r>0}function de(e,t,r){if(e!==null)for(var n,o,i,s,l,u,f,v=0,d=0,p,P=e.type,E=P==="FeatureCollection",y=P==="Feature",L=E?e.features.length:1,b=0;b<L;b++){f=E?e.features[b].geometry:y?e.geometry:e,p=f?f.type==="GeometryCollection":!1,l=p?f.geometries.length:1;for(var a=0;a<l;a++){var c=0,h=0;if(s=p?f.geometries[a]:f,s!==null){u=s.coordinates;var m=s.type;switch(v=r&&(m==="Polygon"||m==="MultiPolygon")?1:0,m){case null:break;case"Point":if(t(u,d,b,c,h)===!1)return!1;d++,c++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(t(u[n],d,b,c,h)===!1)return!1;d++,m==="MultiPoint"&&c++}m==="LineString"&&c++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(o=0;o<u[n].length-v;o++){if(t(u[n][o],d,b,c,h)===!1)return!1;d++}m==="MultiLineString"&&c++,m==="Polygon"&&h++}m==="Polygon"&&c++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(h=0,o=0;o<u[n].length;o++){for(i=0;i<u[n][o].length-v;i++){if(t(u[n][o][i],d,b,c,h)===!1)return!1;d++}h++}c++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(de(s.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function jt(e,t,r,n){var o=r;return de(e,function(i,s,l,u,f){s===0&&r===void 0?o=i:o=t(o,i,s,l,u,f)},n),o}function Mt(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function er(e,t,r){var n=r;return Mt(e,function(o,i){i===0&&r===void 0?n=o:n=t(n,o,i)}),n}function ce(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function tr(e,t,r){var n=r;return ce(e,function(o,i){i===0&&r===void 0?n=o:n=t(n,o,i)}),n}function rr(e){var t=[];return de(e,function(r){t.push(r)}),t}function ye(e,t){var r,n,o,i,s,l,u,f,v,d,p=0,P=e.type==="FeatureCollection",E=e.type==="Feature",y=P?e.features.length:1;for(r=0;r<y;r++){for(l=P?e.features[r].geometry:E?e.geometry:e,f=P?e.features[r].properties:E?e.properties:{},v=P?e.features[r].bbox:E?e.bbox:void 0,d=P?e.features[r].id:E?e.id:void 0,u=l?l.type==="GeometryCollection":!1,s=u?l.geometries.length:1,o=0;o<s;o++){if(i=u?l.geometries[o]:l,i===null){if(t(null,p,f,v,d)===!1)return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(i,p,f,v,d)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<i.geometries.length;n++)if(t(i.geometries[n],p,f,v,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}p++}}function nr(e,t,r){var n=r;return ye(e,function(o,i,s,l,u){i===0&&r===void 0?n=o:n=t(n,o,i,s,l,u)}),n}function ie(e,t){ye(e,function(r,n,o,i,s){var l=r===null?null:r.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(Y(r,o,{bbox:i,id:s}),n,0)===!1?!1:void 0}var u;switch(l){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon";break}for(var f=0;f<r.coordinates.length;f++){var v=r.coordinates[f],d={type:u,coordinates:v};if(t(Y(d,o),n,f)===!1)return!1}})}function ir(e,t,r){var n=r;return ie(e,function(o,i,s){i===0&&s===0&&r===void 0?n=o:n=t(n,o,i,s)}),n}function bt(e,t){ie(e,function(r,n,o){var i=0;if(!!r.geometry){var s=r.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var l,u=0,f=0,v=0;if(de(r,function(d,p,P,E,y){if(l===void 0||n>u||E>f||y>v){l=d,u=n,f=E,v=y,i=0;return}var L=U([l,d],r.properties);if(t(L,n,o,y,i)===!1)return!1;i++,l=d})===!1)return!1}}})}function or(e,t,r){var n=r,o=!1;return bt(e,function(i,s,l,u,f){o===!1&&r===void 0?n=i:n=t(n,i,s,l,u,f),o=!0}),n}function Ct(e,t){if(!e)throw new Error("geojson is required");ie(e,function(r,n,o){if(r.geometry!==null){var i=r.geometry.type,s=r.geometry.coordinates;switch(i){case"LineString":if(t(r,n,o,0,0)===!1)return!1;break;case"Polygon":for(var l=0;l<s.length;l++)if(t(U(s[l],r.properties),n,o,l)===!1)return!1;break}}})}function ar(e,t,r){var n=r;return Ct(e,function(o,i,s,l){i===0&&r===void 0?n=o:n=t(n,o,i,s,l)}),n}function sr(e,t){if(t=t||{},!xe(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,o=t.geometryIndex||0,i=t.segmentIndex||0,s=t.properties,l;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,l=e.features[r].geometry;break;case"Feature":s=s||e.properties,l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var u=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return i<0&&(i=u.length+i-1),U([u[i],u[i+1]],s,t);case"Polygon":return o<0&&(o=u.length+o),i<0&&(i=u[o].length+i-1),U([u[o][i],u[o][i+1]],s,t);case"MultiLineString":return n<0&&(n=u.length+n),i<0&&(i=u[n].length+i-1),U([u[n][i],u[n][i+1]],s,t);case"MultiPolygon":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o),i<0&&(i=u[n][o].length-i-1),U([u[n][o][i],u[n][o][i+1]],s,t)}throw new Error("geojson is invalid")}function ur(e,t){if(t=t||{},!xe(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,o=t.geometryIndex||0,i=t.coordIndex||0,s=t.properties,l;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,l=e.features[r].geometry;break;case"Feature":s=s||e.properties,l=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=e;break;default:throw new Error("geojson is invalid")}if(l===null)return null;var u=l.coordinates;switch(l.type){case"Point":return J(u,s,t);case"MultiPoint":return n<0&&(n=u.length+n),J(u[n],s,t);case"LineString":return i<0&&(i=u.length+i),J(u[i],s,t);case"Polygon":return o<0&&(o=u.length+o),i<0&&(i=u[o].length+i),J(u[o][i],s,t);case"MultiLineString":return n<0&&(n=u.length+n),i<0&&(i=u[n].length+i),J(u[n][i],s,t);case"MultiPolygon":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o),i<0&&(i=u[n][o].length-i),J(u[n][o][i],s,t)}throw new Error("geojson is invalid")}const lr=Object.freeze(Object.defineProperty({__proto__:null,coordAll:rr,coordEach:de,coordReduce:jt,featureEach:ce,featureReduce:tr,findPoint:ur,findSegment:sr,flattenEach:ie,flattenReduce:ir,geomEach:ye,geomReduce:nr,lineEach:Ct,lineReduce:ar,propEach:Mt,propReduce:er,segmentEach:bt,segmentReduce:or},Symbol.toStringTag,{value:"Module"}));function cr(e,t){if(t=t||{},!xe(t))throw new Error("options is invalid");var r=t.reverse||!1,n=t.mutate||!1;if(!e)throw new Error("<geojson> is required");if(typeof r!="boolean")throw new Error("<reverse> must be a boolean");if(typeof n!="boolean")throw new Error("<mutate> must be a boolean");n===!1&&(e=Dt(e));var o=[];switch(e.type){case"GeometryCollection":return ye(e,function(i){Se(i,r)}),e;case"FeatureCollection":return ce(e,function(i){ce(Se(i,r),function(s){o.push(s)})}),K(o)}return Se(e,r)}function Se(e,t){var r=e.type==="Feature"?e.geometry.type:e.type;switch(r){case"GeometryCollection":return ye(e,function(n){Se(n,t)}),e;case"LineString":return je(Z(e),t),e;case"Polygon":return et(Z(e),t),e;case"MultiLineString":return Z(e).forEach(function(n){je(n,t)}),e;case"MultiPolygon":return Z(e).forEach(function(n){et(n,t)}),e;case"Point":case"MultiPoint":return e}}function je(e,t){ke(e)===t&&e.reverse()}function et(e,t){ke(e[0])!==t&&e[0].reverse();for(var r=1;r<e.length;r++)ke(e[r])===t&&e[r].reverse()}function fr(e,t){var r=0,n=0,o=0,i=0,s=0,l=0,u=0,f=0,v=null,d=null,p=e[0],P=e[1],E=t.length;for(r;r<E;r++){n=0;var y=t[r].length-1,L=t[r];if(v=L[0],v[0]!==L[y][0]&&v[1]!==L[y][1])throw new Error("First and last coordinates in a ring must be the same");for(s=v[0]-p,l=v[1]-P,n;n<y;n++){if(d=L[n+1],f=d[1]-P,l<0&&f<0||l>0&&f>0){v=d,l=f,s=v[0]-p;continue}if(u=d[0]-e[0],f>0&&l<=0){if(i=s*f-u*l,i>0)o=o+1;else if(i===0)return 0}else if(l>0&&f<=0){if(i=s*f-u*l,i<0)o=o+1;else if(i===0)return 0}else if(f===0&&l<0){if(i=s*f-u*l,i===0)return 0}else if(l===0&&f<0){if(i=s*f-u*l,i===0)return 0}else if(l===0&&f===0){if(u<=0&&s>=0)return 0;if(s<=0&&u>=0)return 0}v=d,l=f,s=u}}return o%2!==0}const H=11102230246251565e-32,A=134217729,hr=(3+8*H)*H;function Ne(e,t,r,n,o){let i,s,l,u,f=t[0],v=n[0],d=0,p=0;v>f==v>-f?(i=f,f=t[++d]):(i=v,v=n[++p]);let P=0;if(d<e&&p<r)for(v>f==v>-f?(s=f+i,l=i-(s-f),f=t[++d]):(s=v+i,l=i-(s-v),v=n[++p]),i=s,l!==0&&(o[P++]=l);d<e&&p<r;)v>f==v>-f?(s=i+f,u=s-i,l=i-(s-u)+(f-u),f=t[++d]):(s=i+v,u=s-i,l=i-(s-u)+(v-u),v=n[++p]),i=s,l!==0&&(o[P++]=l);for(;d<e;)s=i+f,u=s-i,l=i-(s-u)+(f-u),f=t[++d],i=s,l!==0&&(o[P++]=l);for(;p<r;)s=i+v,u=s-i,l=i-(s-u)+(v-u),v=n[++p],i=s,l!==0&&(o[P++]=l);return(i!==0||P===0)&&(o[P++]=i),P}function dr(e,t){let r=t[0];for(let n=1;n<e;n++)r+=t[n];return r}function we(e){return new Float64Array(e)}const pr=(3+16*H)*H,vr=(2+12*H)*H,mr=(9+64*H)*H*H,ae=we(4),tt=we(8),rt=we(12),nt=we(16),D=we(4);function gr(e,t,r,n,o,i,s){let l,u,f,v,d,p,P,E,y,L,b,a,c,h,m,g,w,M;const C=e-o,I=r-o,S=t-i,T=n-i;h=C*T,p=A*C,P=p-(p-C),E=C-P,p=A*T,y=p-(p-T),L=T-y,m=E*L-(h-P*y-E*y-P*L),g=S*I,p=A*S,P=p-(p-S),E=S-P,p=A*I,y=p-(p-I),L=I-y,w=E*L-(g-P*y-E*y-P*L),b=m-w,d=m-b,ae[0]=m-(b+d)+(d-w),a=h+b,d=a-h,c=h-(a-d)+(b-d),b=c-g,d=c-b,ae[1]=c-(b+d)+(d-g),M=a+b,d=M-a,ae[2]=a-(M-d)+(b-d),ae[3]=M;let F=dr(4,ae),O=vr*s;if(F>=O||-F>=O||(d=e-C,l=e-(C+d)+(d-o),d=r-I,f=r-(I+d)+(d-o),d=t-S,u=t-(S+d)+(d-i),d=n-T,v=n-(T+d)+(d-i),l===0&&u===0&&f===0&&v===0)||(O=mr*s+hr*Math.abs(F),F+=C*v+T*l-(S*f+I*u),F>=O||-F>=O))return F;h=l*T,p=A*l,P=p-(p-l),E=l-P,p=A*T,y=p-(p-T),L=T-y,m=E*L-(h-P*y-E*y-P*L),g=u*I,p=A*u,P=p-(p-u),E=u-P,p=A*I,y=p-(p-I),L=I-y,w=E*L-(g-P*y-E*y-P*L),b=m-w,d=m-b,D[0]=m-(b+d)+(d-w),a=h+b,d=a-h,c=h-(a-d)+(b-d),b=c-g,d=c-b,D[1]=c-(b+d)+(d-g),M=a+b,d=M-a,D[2]=a-(M-d)+(b-d),D[3]=M;const N=Ne(4,ae,4,D,tt);h=C*v,p=A*C,P=p-(p-C),E=C-P,p=A*v,y=p-(p-v),L=v-y,m=E*L-(h-P*y-E*y-P*L),g=S*f,p=A*S,P=p-(p-S),E=S-P,p=A*f,y=p-(p-f),L=f-y,w=E*L-(g-P*y-E*y-P*L),b=m-w,d=m-b,D[0]=m-(b+d)+(d-w),a=h+b,d=a-h,c=h-(a-d)+(b-d),b=c-g,d=c-b,D[1]=c-(b+d)+(d-g),M=a+b,d=M-a,D[2]=a-(M-d)+(b-d),D[3]=M;const B=Ne(N,tt,4,D,rt);h=l*v,p=A*l,P=p-(p-l),E=l-P,p=A*v,y=p-(p-v),L=v-y,m=E*L-(h-P*y-E*y-P*L),g=u*f,p=A*u,P=p-(p-u),E=u-P,p=A*f,y=p-(p-f),L=f-y,w=E*L-(g-P*y-E*y-P*L),b=m-w,d=m-b,D[0]=m-(b+d)+(d-w),a=h+b,d=a-h,c=h-(a-d)+(b-d),b=c-g,d=c-b,D[1]=c-(b+d)+(d-g),M=a+b,d=M-a,D[2]=a-(M-d)+(b-d),D[3]=M;const z=Ne(B,rt,4,D,nt);return nt[z-1]}function yr(e,t,r,n,o,i){const s=(t-i)*(r-o),l=(e-o)*(n-i),u=s-l;if(s===0||l===0||s>0!=l>0)return u;const f=Math.abs(s+l);return Math.abs(u)>=pr*f?u:-gr(e,t,r,n,o,i,f)}var it=function(t,r,n,o,i){this.p1=t,this.p2=r,this.edgeType=n,this.originalIndex=o,this.polygonContourId=i,this.interiorRing=!1,this.minX=Math.min(t.p[0],r.p[0]),this.minY=Math.min(t.p[1],r.p[1]),this.maxX=Math.max(t.p[0],r.p[0]),this.maxY=Math.max(t.p[1],r.p[1]),this.intersectionPoints=[],this.nextEdge=null},Ee=function(t){this.p=t},wr=function(t,r){this.id=t,this.rawCoords=r};function Pr(e,t,r,n,o){for(var i=0,s=[],l=t.type==="Feature"?t.geometry:t,u=l.type==="LineString"?[l.coordinates]:l.coordinates,f=0,v=0;v<u.length;v++){for(var d=u[v].length-1,p=new Ee(u[v][0]),P=null,E={nextEdge:null},y=0;y<d;y++){P=new Ee(u[v][y+1]),p.nextPoint=P,P.prevPoint=p;var L=new it(p,P,"polyline",f,null);n.push(L),E.nextEdge=L,L.prevEdge=E,o[0]=Math.min(o[0],p.p[0]),o[1]=Math.min(o[1],p.p[1]),o[2]=Math.max(o[2],p.p[0]),o[3]=Math.max(o[3],p.p[1]),p=P,f=f+1,E=L}o[0]=Math.min(o[0],u[v][d][0]),o[1]=Math.min(o[1],u[v][d][1]),o[2]=Math.max(o[2],u[v][d][0]),o[3]=Math.max(o[3],u[v][d][1])}for(var b=e.type==="Feature"?e.geometry:e,a=b.type==="Polygon"?[b.coordinates]:b.coordinates,c=a.length,h=0;h<c;h++)for(var m=a[h].length,g=0;g<m;g++){i=i+1;var w=a[h][g],M=w.length;s.push(new wr(i,w));for(var C=new Ee(w[0]),I=C,S=void 0,T=null,F={nextEdge:null,prevEdge:null},O=null,N=1;N<M;N++)S=new Ee(w[N]),I.nextPoint=S,S.prevPoint=I,T=new it(I,S,"polygon",f,i),F.nextEdge=T,T.prevEdge=F,N===1&&(O=T),g>0&&(T.interiorRing=!0),T.intersectPolylineBbox=Er(T,o),r.push(T),I=S,f=f+1,F=T;T.nextEdge=O,O.prevEdge=T,S.nextPoint=C.nextPoint,C.prevPoint=S.prevPoint}return s}function Er(e,t){return!(e.maxX<t[0]||e.minX>t[2]||e.maxY<t[1]||e.minY>t[3])}var St=function(t,r,n,o){this.p=t,this.polylineEdge=r,this.polygonEdge=n,this.isHeadingIn=o,this.distanceFromPolylineEdgeStart=ot(this.polylineEdge.p1.p,this.p),this.distanceFromPolygonEdgeStart=ot(this.polygonEdge.p1.p,this.p),this.polygonEdge.intersectionPoints.push(this),this.polylineEdge.intersectionPoints.push(this),this.visitCount=0};St.prototype.incrementVisitCount=function(){this.visitCount=this.visitCount+1};function ot(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*=r,n*=n,Math.sqrt(r+n)}function Mr(e,t,r){var n,o,i,s=t.length,l=e.length;for(n=0;n<s;n++){var u=t[n];for(o=0;o<l;o++){var f=e[o];if(!!f.intersectPolylineBbox&&!(f.maxX<u.minX||f.minX>u.maxX)&&!(f.maxY<u.minY||f.minY>u.maxY)){var v=Cr(u,f);if(v!==null)for(i=0;i<v.length;i++){var d=yr(f.p1.p[0],f.p1.p[1],f.p2.p[0],f.p2.p[1],u.p1.p[0],u.p1.p[1]),p=new St(v[i],u,f,d>0);r.push(p)}}}}t.forEach(function(P){P.intersectionPoints.sort(function(E,y){return E.distanceFromPolylineEdgeStart-y.distanceFromPolylineEdgeStart})}),e.forEach(function(P){P.intersectionPoints.sort(function(E,y){return E.distanceFromPolygonEdgeStart-y.distanceFromPolygonEdgeStart})})}var br=1e-9;function Me(e,t){return e[0]*t[1]-e[1]*t[0]}function be(e,t){return e[0]*t[0]+e[1]*t[1]}function ne(e,t,r){return[e[0]+t*r[0],e[1]+t*r[1]]}function Cr(e,t,r){var n=[e.p2.p[0]-e.p1.p[0],e.p2.p[1]-e.p1.p[1]],o=[t.p2.p[0]-t.p1.p[0],t.p2.p[1]-t.p1.p[1]],i=[t.p1.p[0]-e.p1.p[0],t.p1.p[1]-e.p1.p[1]],s=Me(n,o),l=s*s,u=be(n,n);if(l>0){var f=Me(i,o)/s;if(f<0||f>1)return null;var v=Me(i,n)/s;return v<0||v>1?null:f===0||f===1?r?null:[ne(e.p1.p,f,n)]:v===0||v===1?r?null:[ne(t.p1.p,v,o)]:[ne(e.p1.p,f,n)]}var d=be(i,i);if(s=Me(i,n),l=s*s,l>br*u*d)return null;var p=be(n,i)/u,P=p+be(n,o)/u,E=Math.min(p,P),y=Math.max(p,P);return E<=1&&y>=0?E===1?r?null:[ne(e.p1.p,E>0?E:0,n)]:y===0?r?null:[ne(e.p1.p,y<1?y:1,n)]:r&&E===0&&y===1?null:[ne(e.p1.p,E>0?E:0,n),ne(e.p1.p,y<1?y:1,n)]:null}function Sr(e,t){var r=cr(e),n=[],o=[],i=[],s=[1/0,1/0,1/0,1/0],l=Pr(r,t,o,i,s);if(Mr(o,i,n),n.length===0)return e;var u={};l.forEach(function(te){return u[te.id]=0}),n.forEach(function(te){var re=te.polygonEdge.polygonContourId;u[re]=u[re]+1});for(var f=0,v=[],d=null,p=0;p<i.length;p++){var P=i[p];if(P.intersectionPoints.length>0){d=P.intersectionPoints[0];break}}for(var E=d,y={visitCount:1};d!==y&&!(f>n.length*2);){if(f=f++,y.visitCount>=2){for(var L=!1,b=0;b<n.length;b++){var a=n[b];if(a.visitCount<2){E=a,L=!0;break}}if(!L)break}E.visitCount=E.visitCount+1;var c=[];v.push(c),c.push(E.p),E.visitCount=E.visitCount+1;var h=at(E,c);y=h;var m=!1;if(h===y&&n.length===2)for(var g=0;g<n.length;g++){var w=n[g];w.visitCount<2&&(m=!0)}for(;h!==E||m;){var M=h.isHeadingIn?Or:Fr;h=M(h,c),h!==E&&(h=at(h,c)),m=!1}if(y.visitCount>=2){for(var C=!1,I=0;I<n.length;I++){var S=n[I];if(S.visitCount<2){E=S,C=!0;break}}C&&(y=E)}E=y}for(var T=v.map(function(te){return[te]}),F=Object.keys(u),O=0;O<F.length;O++){var N=F[O],B=u[N];if(B===0){var z=Ir(o,parseInt(N)),$=Lr(z,l);Tr($,T)}}return{type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:T}}}function Ir(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.polygonContourId===t)return n}}function Lr(e,t){var r=t.find(function(n){return n.id===e.polygonContourId});return r.rawCoords}function Tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(fr(e[0],[n[0]])){n.push(e);return}}t.push([e])}function at(e,t){var r=e.polygonEdge;if(r.intersectionPoints.length>1){var n=r.intersectionPoints[r.intersectionPoints.length-1];if(n!==e){var o=Qe(e,r.intersectionPoints),i=r.intersectionPoints[o+1];return t.push(i.p),i.incrementVisitCount(),i}}for(var s=!0;s;){if(t.push(r.p2.p),r=r.nextEdge,r===null)return e;r.intersectionPoints.length>0&&(s=!1)}return r.intersectionPoints[0].incrementVisitCount(),t.push(r.intersectionPoints[0].p),r.intersectionPoints[0]}function Qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n===e)return r}return null}function Fr(e,t){var r=e.polylineEdge;if(r.intersectionPoints.length===2){var n=r.intersectionPoints[r.intersectionPoints.length-1];if(n===e){var o=r.intersectionPoints[0];return t.push(o.p),o.incrementVisitCount(),o}else return t.push(n.p),n.incrementVisitCount(),n}else if(r.intersectionPoints.length>2){var i=r.intersectionPoints[0];if(i!==e){var s=Qe(e,r.intersectionPoints),l=r.intersectionPoints[s-1];return t.push(l.p),l.incrementVisitCount(),l}}for(var u=!0;u;){if(t.push(r.p1.p),r=r.prevEdge,r.originalIndex===void 0)return e;r.intersectionPoints.length>0&&(u=!1)}if(r.originalIndex===void 0)return e;var f=r.intersectionPoints[r.intersectionPoints.length-1];return f.incrementVisitCount(),t.push(f.p),f}function Or(e,t){var r=e.polylineEdge;if(r.intersectionPoints.length>1){var n=r.intersectionPoints[r.intersectionPoints.length-1];if(n!==e){var o=Qe(e,r.intersectionPoints),i=r.intersectionPoints[o+1];return t.push(i.p),i.incrementVisitCount(),i}}for(var s=!0;s;){if(t.push(r.p2.p),r=r.nextEdge,r===null)return e;r.intersectionPoints.length>0&&(s=!1)}if(r===void 0)return e;var l=r.intersectionPoints[0];return l.incrementVisitCount(),t.push(l.p),l}function st(e){if(!e)throw new Error("geojson is required");var t=[];return ie(e,function(r){xr(r,t)}),K(t)}function xr(e,t){var r=[],n=e.geometry;if(n!==null){switch(n.type){case"Polygon":r=Z(n);break;case"LineString":r=[Z(n)]}r.forEach(function(o){var i=Ar(o,e.properties);i.forEach(function(s){s.id=t.length,t.push(s)})})}}function Ar(e,t){var r=[];return e.reduce(function(n,o){var i=U([n,o],t);return i.bbox=_r(n,o),r.push(i),o}),r}function _r(e,t){var r=e[0],n=e[1],o=t[0],i=t[1],s=r<o?r:o,l=n<i?n:i,u=r>o?r:o,f=n>i?n:i;return[s,l,u,f]}var Nr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function He(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var Ke={exports:{}},It={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Nr,function(){function r(a,c,h,m,g){(function w(M,C,I,S,T){for(;S>I;){if(S-I>600){var F=S-I+1,O=C-I+1,N=Math.log(F),B=.5*Math.exp(2*N/3),z=.5*Math.sqrt(N*B*(F-B)/F)*(O-F/2<0?-1:1),$=Math.max(I,Math.floor(C-O*B/F+z)),te=Math.min(S,Math.floor(C+(F-O)*B/F+z));w(M,C,$,te,T)}var re=M[C],pe=I,V=S;for(n(M,I,C),T(M[S],re)>0&&n(M,I,S);pe<V;){for(n(M,pe,V),pe++,V--;T(M[pe],re)<0;)pe++;for(;T(M[V],re)>0;)V--}T(M[I],re)===0?n(M,I,V):n(M,++V,S),V<=C&&(I=V+1),C<=V&&(S=V-1)}})(a,c,h||0,m||a.length-1,g||o)}function n(a,c,h){var m=a[c];a[c]=a[h],a[h]=m}function o(a,c){return a<c?-1:a>c?1:0}var i=function(a){a===void 0&&(a=9),this._maxEntries=Math.max(4,a),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(a,c,h){if(!h)return c.indexOf(a);for(var m=0;m<c.length;m++)if(h(a,c[m]))return m;return-1}function l(a,c){u(a,0,a.children.length,c,a)}function u(a,c,h,m,g){g||(g=L(null)),g.minX=1/0,g.minY=1/0,g.maxX=-1/0,g.maxY=-1/0;for(var w=c;w<h;w++){var M=a.children[w];f(g,a.leaf?m(M):M)}return g}function f(a,c){return a.minX=Math.min(a.minX,c.minX),a.minY=Math.min(a.minY,c.minY),a.maxX=Math.max(a.maxX,c.maxX),a.maxY=Math.max(a.maxY,c.maxY),a}function v(a,c){return a.minX-c.minX}function d(a,c){return a.minY-c.minY}function p(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function P(a){return a.maxX-a.minX+(a.maxY-a.minY)}function E(a,c){return a.minX<=c.minX&&a.minY<=c.minY&&c.maxX<=a.maxX&&c.maxY<=a.maxY}function y(a,c){return c.minX<=a.maxX&&c.minY<=a.maxY&&c.maxX>=a.minX&&c.maxY>=a.minY}function L(a){return{children:a,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(a,c,h,m,g){for(var w=[c,h];w.length;)if(!((h=w.pop())-(c=w.pop())<=m)){var M=c+Math.ceil((h-c)/m/2)*m;r(a,M,c,h,g),w.push(c,M,M,h)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(a){var c=this.data,h=[];if(!y(a,c))return h;for(var m=this.toBBox,g=[];c;){for(var w=0;w<c.children.length;w++){var M=c.children[w],C=c.leaf?m(M):M;y(a,C)&&(c.leaf?h.push(M):E(a,C)?this._all(M,h):g.push(M))}c=g.pop()}return h},i.prototype.collides=function(a){var c=this.data;if(!y(a,c))return!1;for(var h=[];c;){for(var m=0;m<c.children.length;m++){var g=c.children[m],w=c.leaf?this.toBBox(g):g;if(y(a,w)){if(c.leaf||E(a,w))return!0;h.push(g)}}c=h.pop()}return!1},i.prototype.load=function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var c=0;c<a.length;c++)this.insert(a[c]);return this}var h=this._build(a.slice(),0,a.length-1,0);if(this.data.children.length)if(this.data.height===h.height)this._splitRoot(this.data,h);else{if(this.data.height<h.height){var m=this.data;this.data=h,h=m}this._insert(h,this.data.height-h.height-1,!0)}else this.data=h;return this},i.prototype.insert=function(a){return a&&this._insert(a,this.data.height-1),this},i.prototype.clear=function(){return this.data=L([]),this},i.prototype.remove=function(a,c){if(!a)return this;for(var h,m,g,w=this.data,M=this.toBBox(a),C=[],I=[];w||C.length;){if(w||(w=C.pop(),m=C[C.length-1],h=I.pop(),g=!0),w.leaf){var S=s(a,w.children,c);if(S!==-1)return w.children.splice(S,1),C.push(w),this._condense(C),this}g||w.leaf||!E(w,M)?m?(h++,w=m.children[h],g=!1):w=null:(C.push(w),I.push(h),h=0,m=w,w=w.children[0])}return this},i.prototype.toBBox=function(a){return a},i.prototype.compareMinX=function(a,c){return a.minX-c.minX},i.prototype.compareMinY=function(a,c){return a.minY-c.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(a){return this.data=a,this},i.prototype._all=function(a,c){for(var h=[];a;)a.leaf?c.push.apply(c,a.children):h.push.apply(h,a.children),a=h.pop();return c},i.prototype._build=function(a,c,h,m){var g,w=h-c+1,M=this._maxEntries;if(w<=M)return l(g=L(a.slice(c,h+1)),this.toBBox),g;m||(m=Math.ceil(Math.log(w)/Math.log(M)),M=Math.ceil(w/Math.pow(M,m-1))),(g=L([])).leaf=!1,g.height=m;var C=Math.ceil(w/M),I=C*Math.ceil(Math.sqrt(M));b(a,c,h,I,this.compareMinX);for(var S=c;S<=h;S+=I){var T=Math.min(S+I-1,h);b(a,S,T,C,this.compareMinY);for(var F=S;F<=T;F+=C){var O=Math.min(F+C-1,T);g.children.push(this._build(a,F,O,m-1))}}return l(g,this.toBBox),g},i.prototype._chooseSubtree=function(a,c,h,m){for(;m.push(c),!c.leaf&&m.length-1!==h;){for(var g=1/0,w=1/0,M=void 0,C=0;C<c.children.length;C++){var I=c.children[C],S=p(I),T=(F=a,O=I,(Math.max(O.maxX,F.maxX)-Math.min(O.minX,F.minX))*(Math.max(O.maxY,F.maxY)-Math.min(O.minY,F.minY))-S);T<w?(w=T,g=S<g?S:g,M=I):T===w&&S<g&&(g=S,M=I)}c=M||c.children[0]}var F,O;return c},i.prototype._insert=function(a,c,h){var m=h?a:this.toBBox(a),g=[],w=this._chooseSubtree(m,this.data,c,g);for(w.children.push(a),f(w,m);c>=0&&g[c].children.length>this._maxEntries;)this._split(g,c),c--;this._adjustParentBBoxes(m,g,c)},i.prototype._split=function(a,c){var h=a[c],m=h.children.length,g=this._minEntries;this._chooseSplitAxis(h,g,m);var w=this._chooseSplitIndex(h,g,m),M=L(h.children.splice(w,h.children.length-w));M.height=h.height,M.leaf=h.leaf,l(h,this.toBBox),l(M,this.toBBox),c?a[c-1].children.push(M):this._splitRoot(h,M)},i.prototype._splitRoot=function(a,c){this.data=L([a,c]),this.data.height=a.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(a,c,h){for(var m,g,w,M,C,I,S,T=1/0,F=1/0,O=c;O<=h-c;O++){var N=u(a,0,O,this.toBBox),B=u(a,O,h,this.toBBox),z=(g=N,w=B,M=void 0,C=void 0,I=void 0,S=void 0,M=Math.max(g.minX,w.minX),C=Math.max(g.minY,w.minY),I=Math.min(g.maxX,w.maxX),S=Math.min(g.maxY,w.maxY),Math.max(0,I-M)*Math.max(0,S-C)),$=p(N)+p(B);z<T?(T=z,m=O,F=$<F?$:F):z===T&&$<F&&(F=$,m=O)}return m||h-c},i.prototype._chooseSplitAxis=function(a,c,h){var m=a.leaf?this.compareMinX:v,g=a.leaf?this.compareMinY:d;this._allDistMargin(a,c,h,m)<this._allDistMargin(a,c,h,g)&&a.children.sort(m)},i.prototype._allDistMargin=function(a,c,h,m){a.children.sort(m);for(var g=this.toBBox,w=u(a,0,c,g),M=u(a,h-c,h,g),C=P(w)+P(M),I=c;I<h-c;I++){var S=a.children[I];f(w,a.leaf?g(S):S),C+=P(w)}for(var T=h-c-1;T>=c;T--){var F=a.children[T];f(M,a.leaf?g(F):F),C+=P(M)}return C},i.prototype._adjustParentBBoxes=function(a,c,h){for(var m=h;m>=0;m--)f(c[m],a)},i.prototype._condense=function(a){for(var c=a.length-1,h=void 0;c>=0;c--)a[c].children.length===0?c>0?(h=a[c-1].children).splice(h.indexOf(a[c]),1):this.clear():l(a[c],this.toBBox)},i})})(It);const Dr=He(Kt),kr=He(lr);function Re(e){var t=[1/0,1/0,-1/0,-1/0];return de(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}Re.default=Re;const Rr=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"})),Yr=He(Rr);var q=It.exports,Lt=Dr,Tt=kr,se=Yr.default,Br=Tt.featureEach;Tt.coordEach;Lt.polygon;var ut=Lt.featureCollection;function Ft(e){var t=new q(e);return t.insert=function(r){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:se(r),q.prototype.insert.call(this,r)},t.load=function(r){var n=[];return Array.isArray(r)?r.forEach(function(o){if(o.type!=="Feature")throw new Error("invalid features");o.bbox=o.bbox?o.bbox:se(o),n.push(o)}):Br(r,function(o){if(o.type!=="Feature")throw new Error("invalid features");o.bbox=o.bbox?o.bbox:se(o),n.push(o)}),q.prototype.load.call(this,n)},t.remove=function(r,n){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:se(r),q.prototype.remove.call(this,r,n)},t.clear=function(){return q.prototype.clear.call(this)},t.search=function(r){var n=q.prototype.search.call(this,this.toBBox(r));return ut(n)},t.collides=function(r){return q.prototype.collides.call(this,this.toBBox(r))},t.all=function(){var r=q.prototype.all.call(this);return ut(r)},t.toJSON=function(){return q.prototype.toJSON.call(this)},t.fromJSON=function(r){return q.prototype.fromJSON.call(this,r)},t.toBBox=function(r){var n;if(r.bbox)n=r.bbox;else if(Array.isArray(r)&&r.length===4)n=r;else if(Array.isArray(r)&&r.length===6)n=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")n=se(r);else if(r.type==="FeatureCollection")n=se(r);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},t}Ke.exports=Ft;Ke.exports.default=Ft;function $e(e,t){var r={},n=[];if(e.type==="LineString"&&(e=Y(e)),t.type==="LineString"&&(t=Y(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var o=lt(e,t);return o&&n.push(o),K(n)}var i=Ke.exports();return i.load(st(t)),ce(st(e),function(s){ce(i.search(s),function(l){var u=lt(s,l);if(u){var f=Z(u).join(",");r[f]||(r[f]=!0,n.push(u))}})}),K(n)}function lt(e,t){var r=Z(e),n=Z(t);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=r[0][0],i=r[0][1],s=r[1][0],l=r[1][1],u=n[0][0],f=n[0][1],v=n[1][0],d=n[1][1],p=(d-f)*(s-o)-(v-u)*(l-i),P=(v-u)*(i-f)-(d-f)*(o-u),E=(s-o)*(i-f)-(l-i)*(o-u);if(p===0)return P===0&&E===0,null;var y=P/p,L=E/p;if(y>=0&&y<=1&&L>=0&&L<=1){var b=o+y*(s-o),a=i+y*(l-i);return J([b,a])}return null}function ge(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var n=$t(e),o=Ae(t),i=o.type,s=t.bbox,l=o.coordinates;if(s&&Vr(n,s)===!1)return!1;i==="Polygon"&&(l=[l]);for(var u=!1,f=0;f<l.length&&!u;f++)if(ct(n,l[f][0],r.ignoreBoundary)){for(var v=!1,d=1;d<l[f].length&&!v;)ct(n,l[f][d],!r.ignoreBoundary)&&(v=!0),d++;v||(u=!0)}return u}function ct(e,t,r){var n=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var o=0,i=t.length-1;o<t.length;i=o++){var s=t[o][0],l=t[o][1],u=t[i][0],f=t[i][1],v=e[1]*(s-u)+l*(u-e[0])+f*(e[0]-s)===0&&(s-e[0])*(u-e[0])<=0&&(l-e[1])*(f-e[1])<=0;if(v)return!r;var d=l>e[1]!=f>e[1]&&e[0]<(u-s)*(e[1]-l)/(f-l)+s;d&&(n=!n)}return n}function Vr(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function Ye(e,t){t===void 0&&(t={});var r=Ae(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),r.type){case"Polygon":return Ur(r,t);case"MultiPolygon":return Xr(r,t);default:throw new Error("invalid poly")}}function Ur(e,t){t===void 0&&(t={});var r=Ae(e),n=r.coordinates,o=t.properties?t.properties:e.type==="Feature"?e.properties:{};return Ot(n,o)}function Xr(e,t){t===void 0&&(t={});var r=Ae(e),n=r.coordinates,o=t.properties?t.properties:e.type==="Feature"?e.properties:{},i=[];return n.forEach(function(s){i.push(Ot(s,o))}),K(i)}function Ot(e,t){return e.length>1?Ze(e,t):U(e[0],t)}function Gr(e,t){var r=!0;return ie(e,function(n){ie(t,function(o){if(r===!1)return!1;r=zr(n.geometry,o.geometry)})}),r}function zr(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return!Wr(e.coordinates,t.coordinates);case"LineString":return!ft(t,e);case"Polygon":return!ge(e,t)}break;case"LineString":switch(t.type){case"Point":return!ft(e,t);case"LineString":return!qr(e,t);case"Polygon":return!ht(t,e)}break;case"Polygon":switch(t.type){case"Point":return!ge(t,e);case"LineString":return!ht(e,t);case"Polygon":return!Jr(t,e)}}return!1}function ft(e,t){for(var r=0;r<e.coordinates.length-1;r++)if(Zr(e.coordinates[r],e.coordinates[r+1],t.coordinates))return!0;return!1}function qr(e,t){var r=$e(e,t);return r.features.length>0}function ht(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){var o=n[r];if(ge(o,e))return!0}var i=$e(t,Ye(e));return i.features.length>0}function Jr(e,t){for(var r=0,n=e.coordinates[0];r<n.length;r++){var o=n[r];if(ge(o,t))return!0}for(var i=0,s=t.coordinates[0];i<s.length;i++){var l=s[i];if(ge(l,e))return!0}var u=$e(Ye(e),Ye(t));return u.features.length>0}function Zr(e,t,r){var n=r[0]-e[0],o=r[1]-e[1],i=t[0]-e[0],s=t[1]-e[1],l=n*s-o*i;return l!==0?!1:Math.abs(i)>=Math.abs(s)?i>0?e[0]<=r[0]&&r[0]<=t[0]:t[0]<=r[0]&&r[0]<=e[0]:s>0?e[1]<=r[1]&&r[1]<=t[1]:t[1]<=r[1]&&r[1]<=e[1]}function Wr(e,t){return e[0]===t[0]&&e[1]===t[1]}const fe="split_polygon",xt=`${fe}_passing_draw_line_string`,Be=`${fe}_highlight`,Ce={highlightColor:"#222",lineWidth:0,lineWidthUnit:"kilometers",onSelectFeatureRequest(){throw new Error("no Feature is selected to split.")}},Pe={};Pe.onSetup=function(e){const{featureIds:t=[],highlightColor:r=Ce.highlightColor,lineWidth:n=Ce.lineWidth,lineWidthUnit:o=Ce.lineWidthUnit,onSelectFeatureRequest:i=Ce.onSelectFeatureRequest}=e||{},s=this._ctx.api,l=[],u=this.getSelected();if(t.length!==0)l.push.apply(l,t.map(v=>s.get(v)));else if(u.length!==0)l.push.apply(l,u.filter(v=>v.type===R.POLYGON||v.type===R.MULTI_POLYGON).map(v=>v.toGeoJSON()));else return i();console.log("\u{1F680} ~ file: mode.js ~ line 74 ~ featuresToSplit",l);const f={options:{highlightColor:r,lineWidth:n,lineWidthUnit:o},featuresToSplit:l};return setTimeout(this.drawAndSplit.bind(this,f),0),f};Pe.drawAndSplit=function(e){const t=this._ctx.api;console.log("\u{1F680} ~ file: mode.js ~ line 109 ~ state.featuresToSplit.forEach ~ state.featuresToSplit",e.featuresToSplit);try{this.changeMode(xt,{onDraw:r=>{var o,i;const n=[];e.featuresToSplit.forEach(s=>{if(Gr(s,r))throw new Error("Line must be outside of Polygon");{const l=Qr(s.geometry,r.geometry,{});l.id=s.id,t.add(l),n.push(l)}}),console.log("\u{1F680} ~ file: mode.js ~ line 111 ~ allPoly",n),this.fireUpdate(n),(i=(o=e.featuresToSplit)==null?void 0:o[0])!=null&&i.id&&t.setFeatureProperty(e.featuresToSplit[0].id,Be,void 0)},onCancel:()=>{var r,n;(n=(r=e.featuresToSplit)==null?void 0:r[0])!=null&&n.id&&t.setFeatureProperty(e.featuresToSplit[0].id,Be,void 0)}})}catch(r){console.log("\u{1F680} ~ file: mode.js ~ line 116 ~ err",r)}};Pe.toDisplayFeatures=function(e,t,r){r(t)};Pe.fireUpdate=function(e){this.map.fire(Le.UPDATE,{action:fe,features:e})};function Qr(e,t){return Sr(e,t)}const ue=`user_${Be}`,Hr=e=>dt(e).map(t=>t.id.endsWith("inactive")?{...t,filter:[...t.filter,["!has",ue]]}:t).concat([{id:`${fe}-fill-active`,type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["has",ue]],paint:{"fill-color":["get",ue],"fill-outline-color":["get",ue],"fill-opacity":.1}},{id:`${fe}-stroke-active`,type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["has",ue]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["get",ue],"line-dasharray":[.2,2],"line-width":2}}]),W={};W.onSetup=function(){const e=this.newFeature({type:R.FEATURE,properties:{},geometry:{type:R.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:k.ADD}),this.activateUIButton(Xe.POINT),this.setActionableState({trash:!0}),{point:e}};W.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)};W.onTap=W.onClick=function(e,t){this.updateUIClasses({mouse:k.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.map.fire(Le.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.point.id]})};W.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};W.toDisplayFeatures=function(e,t,r){const n=t.properties.id===e.point.id;if(t.properties.active=n?ee.ACTIVE:ee.INACTIVE,!n)return r(t)};W.onTrash=W.stopDrawingAndRemove;W.onKeyUp=function(e,t){if(Oe(t)||Ge(t))return this.stopDrawingAndRemove(e,t)};const{onSetup:Kr,onClick:$r,...jr}=W;({...jr});function Ve(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}function Ue(e,t,r,n){return{type:R.FEATURE,properties:{meta:Te.VERTEX,parent:e,coord_path:r,active:n?ee.ACTIVE:ee.INACTIVE},geometry:{type:R.POINT,coordinates:t}}}const X={};X.onSetup=function(e){e=e||{};const t=e.featureId;let r,n,o="forward";if(t){if(r=this.getFeature(t),!r)throw new Error("Could not find a feature with the provided featureId");let i=e.from;if(i&&i.type==="Feature"&&i.geometry&&i.geometry.type==="Point"&&(i=i.geometry),i&&i.type==="Point"&&i.coordinates&&i.coordinates.length===2&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");const s=r.coordinates.length-1;if(r.coordinates[s][0]===i[0]&&r.coordinates[s][1]===i[1])n=s+1,r.addCoordinate(n,...r.coordinates[s]);else if(r.coordinates[0][0]===i[0]&&r.coordinates[0][1]===i[1])o="backwards",n=0,r.addCoordinate(n,...r.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else r=this.newFeature({type:R.FEATURE,properties:{},geometry:{type:R.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(r);return this.clearSelectedFeatures(),he.disable(this),this.updateUIClasses({mouse:k.ADD}),this.activateUIButton(Xe.LINE),this.setActionableState({trash:!0}),{line:r,currentVertexPosition:n,direction:o}};X.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&Ve(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&Ve(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:k.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};X.clickOnVertex=function(e){return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.line.id]})};X.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),Fe(t)&&this.updateUIClasses({mouse:k.POINTER})};X.onTap=X.onClick=function(e,t){if(Fe(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};X.onKeyUp=function(e,t){Ge(t)?this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.line.id]}):Oe(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT))};X.onStop=function(e){he.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.map.fire(Le.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT,{},{silent:!0})))};X.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)};X.toDisplayFeatures=function(e,t,r){const n=t.properties.id===e.line.id;if(t.properties.active=n?ee.ACTIVE:ee.INACTIVE,!n)return r(t);t.geometry.coordinates.length<2||(t.properties.meta=Te.FEATURE,r(Ue(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),r(t))};const{onSetup:en,onMouseMove:tn,...rn}=X,_e={originOnSetup:en,originOnMouseMove:tn,...rn};_e.onSetup=function(e){const t=this.originOnSetup(),{onDraw:r,onCancel:n}=e;return t.onDraw=r,t.onCancel=n,t};_e.onMouseMove=function(e,t){this.updateUIClasses({mouse:k.ADD}),this.originOnMouseMove(e,t)};_e.onStop=function(e){const t=e.line;if(this.updateUIClasses({mouse:k.NONE}),he.enable(this),this.activateUIButton(),this.getFeature(t.id)===void 0){typeof e.onCancel=="function"&&e.onCancel();return}else t.removeCoordinate(`${e.currentVertexPosition}`);t.isValid()&&(typeof e.onDraw=="function"?e.onDraw(t.toGeoJSON()):this.map.fire("draw.passing-create",{features:[t.toGeoJSON()]})),this.deleteFeature([t.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT,{},{silent:!0})};const G={};G.onSetup=function(){const e=this.newFeature({type:R.FEATURE,properties:{},geometry:{type:R.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),he.disable(this),this.updateUIClasses({mouse:k.ADD}),this.activateUIButton(Xe.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};G.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&Ve(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:k.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};G.clickOnVertex=function(e){return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};G.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),Fe(t)&&this.updateUIClasses({mouse:k.POINTER})};G.onTap=G.onClick=function(e,t){return Fe(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};G.onKeyUp=function(e,t){Oe(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)):Ge(t)&&this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};G.onStop=function(e){this.updateUIClasses({mouse:k.NONE}),he.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.map.fire(Le.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT,{},{silent:!0})))};G.toDisplayFeatures=function(e,t,r){const n=t.properties.id===e.polygon.id;if(t.properties.active=n?ee.ACTIVE:ee.INACTIVE,!n)return r(t);if(t.geometry.coordinates.length===0)return;const o=t.geometry.coordinates[0].length;if(!(o<3)){if(t.properties.meta=Te.FEATURE,r(Ue(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),o>3){const i=t.geometry.coordinates[0].length-3;r(Ue(e.polygon.id,t.geometry.coordinates[0][i],`0.${i}`,!1))}if(o<=4){const i=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(r({type:R.FEATURE,properties:t.properties,geometry:{coordinates:i,type:R.LINE_STRING}}),o===3)return}return r(t)}};G.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)};const{onSetup:nn,onMouseMove:on,...an}=G;({...an});function sn(e){return{...pt(e),[xt]:_e,[fe]:Pe}}const{MODE:un}={BASE_URL:"/mapbox-gl-draw-split-polygon-mode/",MODE:"production",DEV:!1,PROD:!0};let ve,j,At;const ln=()=>{j.changeMode("select_feature",{selectHighlightColor:"yellow",onSelect(e){try{j==null||j.changeMode("split_polygon",{featureIds:[e],highlightColor:"#222",lineWidth:.001,lineWidthUnit:"kilometers"})}catch(t){console.error(t)}}})};class cn{constructor(t){let r=this;r.draw=t.draw,r.buttons=t.buttons||[],r.onAddOrig=t.draw.onAdd,r.onRemoveOrig=t.draw.onRemove}onAdd(t){let r=this;return r.map=t,r.elContainer=r.onAddOrig(t),r.buttons.forEach(n=>{r.addButton(n)}),r.elContainer}onRemove(t){let r=this;r.buttons.forEach(n=>{r.removeButton(n)}),r.onRemoveOrig(t)}addButton(t){let r=this;var n=document.createElement("button");n.className="mapbox-gl-draw_ctrl-draw-btn",t.classes instanceof Array&&t.classes.forEach(o=>{n.classList.add(o)}),n.addEventListener(t.on,t.action),r.elContainer.appendChild(n),t.elButton=n}removeButton(t){t.elButton.removeEventListener(t.on,t.action),t.elButton.remove()}}mapboxgl.getRTLTextPluginStatus()==="unavailable"&&mapboxgl.setRTLTextPlugin("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",e=>{e&&console.error(e)},!0);ve=new mapboxgl.Map({container:"map",style:un==="development"?{version:8,sources:{},layers:[]}:"https://map.ir/vector/styles/main/mapir-xyz-light-style.json",center:[51.3857,35.6102],zoom:7.78,pitch:0,interactive:!0,hash:!0,attributionControl:!0,customAttribution:"\xA9 Map \xA9 Openstreetmap",transformRequest:e=>({url:e,headers:{"x-api-key":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImRiZWU0YWU4OTk4OTA3MmQ3OTFmMjQ4ZDE5N2VhZTgwZWU2NTUyYjhlYjczOWI2NDdlY2YyYzIzNWRiYThiMzIzOTM5MDkzZDM0NTY2MmU3In0.eyJhdWQiOiI5NDMyIiwianRpIjoiZGJlZTRhZTg5OTg5MDcyZDc5MWYyNDhkMTk3ZWFlODBlZTY1NTJiOGViNzM5YjY0N2VjZjJjMjM1ZGJhOGIzMjM5MzkwOTNkMzQ1NjYyZTciLCJpYXQiOjE1OTA4MjU0NzIsIm5iZiI6MTU5MDgyNTQ3MiwiZXhwIjoxNTkzNDE3NDcyLCJzdWIiOiIiLCJzY29wZXMiOlsiYmFzaWMiXX0.M_z4xJlJRuYrh8RFe9UrW89Y_XBzpPth4yk3hlT-goBm8o3x8DGCrSqgskFfmJTUD2wC2qSoVZzQKB67sm-swtD5fkxZO7C0lBCMAU92IYZwCdYehIOtZbP5L1Lfg3C6pxd0r7gQOdzcAZj9TStnKBQPK3jSvzkiHIQhb6I0sViOS_8JceSNs9ZlVelQ3gs77xM2ksWDM6vmqIndzsS-5hUd-9qdRDTLHnhdbS4_UBwNDza47Iqd5vZkBgmQ_oDZ7dVyBuMHiQFg28V6zhtsf3fijP0UhePCj4GM89g3tzYBOmuapVBobbX395FWpnNC3bYg7zDaVHcllSUYDjGc1A","Mapir-SDK":"reactjs"}})});j=new MapboxDraw({modes:{...sn(pt(MapboxDraw.modes))},styles:[...Hr(dt(_t))],userProperties:!0});window.draw=j;At=new cn({draw:j,buttons:[{on:"click",action:ln,classes:["split-polygon"]}]});ve.once("load",()=>{ve.resize(),ve.addControl(At,"top-right"),j.set({type:"FeatureCollection",features:[{id:"example",type:"Feature",properties:{},geometry:{coordinates:[[[[52,35],[53,35],[53,36],[52,36],[52,35]]],[[[50,35],[51,35],[51,36],[50,36],[50,35]],[[50.2,35.2],[50.8,35.2],[50.8,35.8],[50.2,35.8],[50.2,35.2]]]],type:"MultiPolygon"}}]}),ve.on("draw.update",function(e){console.log("\u{1F680} ~ file: index.js ~ line 158 ~ e",e)})});
